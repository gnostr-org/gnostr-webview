<html>
<head>
<link rel="stylesheet" href="assets/css/style.css" />
<link rel="stylesheet" href="assets/css/topbar.css" />
<link rel="stylesheet" href="assets/css/flex.css" />
<link rel="stylesheet" href="assets/css/data-flex.css" />
<link rel="stylesheet" href="assets/css/top_bar.css" />
<!-- <link rel="stylesheet" href="assets/css/no-topbar.css"> -->
<script defer src="assets/js/renderer.js"></script>
<meta charset="UTF-8" />
<title>
Github
</title>
<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>
<body>
<!-- Topbar -->
<div id="controls">
<button id="home" title="Go Home">
Home
</button>
<button id="print_button">
Print
</button>
</div>
<!-- End topbar -->
<!-- Webview -->
<p><webview autowidth="on" style="height:100px" src="http://0.0.0.0:1234" id="webview" data-home="http://0.0.0.0:1234"></webview></p>
<p>mainWindow.loadURL(<code>file://${__dirname}/index.html</code>);</p>
<h1 id="electron-webview">Electron webview</h1>
<blockquote>
<p>Uses <a
href="https://releases.electronjs.org/release/v25.0.0">Electron
25</a></p>
</blockquote>
<p>This is a simple Electron application to create a webview.</p>
<p>Features:</p>
<ul>
<li>Responsive window</li>
<li>Remember the window dimensions when reopening</li>
<li>Menu &amp; keyboard shortcuts for MacOs</li>
<li>No title bar</li>
<li>Home button</li>
<li>Print function</li>
<li>MacOS, Windows and Linux executable with an app icon</li>
<li>DMG installer for Mac</li>
</ul>
<figure>
<img src="assets/icons/png/512x512.png" alt="Electron webview" />
<figcaption aria-hidden="true">Electron webview</figcaption>
</figure>
<p>This Electron webview application needs just these files:</p>
<ul>
<li><code>package.json</code> - Points to the app’s main file and lists
its details and dependencies.</li>
<li><code>main.js</code> - Starts the app and creates a browser window
to render website. This is the app’s <strong>main process</strong>.</li>
<li><code>index.html</code> - A web page to render. This is the app’s
<strong>renderer process</strong>.</li>
<li><code>assets/</code> - Assets for the project (style, scripts,
icons)</li>
<li><code>src/</code> - Sources folder:
<ul>
<li><code>menu.js</code> : menu template customization</li>
<li><code>print.js</code> : print function</li>
<li><code>view.js</code> : browser view usage</li>
<li><code>window.js</code> : browser window customization</li>
</ul></li>
</ul>
<p>Note: check <a
href="https://www.electronjs.org/docs/tutorial/quick-start">the offical
Electron quick start</a> if you need to learn the basics about
Electron.</p>
<h2 id="usage">Usage</h2>
<p>To run this repository you’ll need <a
href="https://nodejs.org/en/download/">Node.js</a> (which comes with <a
href="http://npmjs.com">npm</a>) installed on your computer. From your
command line:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install dependencies</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npm install</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the app</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npm start</span></code></pre></div>
<h3 id="electron-20-major-update">Electron 20 major update</h3>
<p>Since Electron 20 update, <a
href="https://github.com/electron/remote"><span class="citation"
data-cites="electron/remote">@electron/remote</span></a> is replaced by
<a
href="https://www.electronjs.org/docs/latest/api/ipc-renderer">ipcRenderer</a>
and <a
href="https://www.electronjs.org/fr/docs/latest/api/context-bridge">contextBridge</a>,
due to <span class="citation"
data-cites="electron/remote">@electron/remote</span> <a
href="https://nornagon.medium.com/electrons-remote-module-considered-harmful-70d69500f31">many
subtle pitfalls</a>.</p>
<h3 id="electron-12-major-update">Electron 12+ major update</h3>
<ul>
<li>Since <a
href="https://www.electronjs.org/docs/api/remote">remote</a> module is
deprecated since Electron 12, this boilerplate uses <a
href="https://github.com/electron/remote"><span class="citation"
data-cites="electron/remote">@electron/remote</span></a>.</li>
<li>This boilerplate doesn’t use <code>nodeIntegration</code> nor
<code>nodeIntegrationInWorker</code> option in
<code>BrowserWindow</code> anymore <a
href="https://www.electronjs.org/docs/tutorial/security#2-do-not-enable-nodejs-integration-for-remote-content">as
required for security reasons</a> but uses a preload script instead.
This is useful for the app print function. If you want to see print
function using <code>nodeIntegration</code> option, <a
href="https://github.com/hokein/electron-sample-apps/tree/master/printing">check
this printing sample app</a>.</li>
</ul>
<h2 id="configuration">Configuration</h2>
<p>You just need to change the <code>src</code> attribute of the
<code>webview</code> in <code>index.html</code> file to display the url
you want in your webview.</p>
<p>Alternatively, it’s also possible to just load an external URL:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Comment</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">//mainWindow.loadURL(`file://${__dirname}/index.html`); // Load custom html file with external content using webview tag</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Uncomment</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  mainWindow<span class="op">.</span><span class="fu">loadURL</span>(<span class="st">&quot;https://github.com&quot;</span>)<span class="op">;</span> <span class="co">// Load directly an URL if you don&#39;t need interface customization</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>   <span class="co">// Or uncomment if you prefer to use BrowserView:</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> view <span class="op">=</span> <span class="pp">require</span>(<span class="st">&quot;./src/view&quot;</span>)<span class="op">;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  view<span class="op">.</span><span class="fu">createBrowserView</span>(mainWindow)<span class="op">;</span></span></code></pre></div>
<h3 id="developer-tools">Developer tools</h3>
<p>You can show by default the developer tools by uncommenting in
<code>main.js</code> file: <code>mainWindow.openDevTools();</code>.</p>
<h3 id="title-bar">Title bar</h3>
<p>You can hide the title bar of the app by setting
<code>frame: false</code> or <code>titleBarStyle: 'hidden'</code> when
creating the window in <code>main.js</code> in <code>mainWindow</code>
variable.</p>
<p>If you keep displaying the topbar using
<code>titleBarStyle: 'hidden'</code> setting, you would have to adjust
the topbar style.</p>
<p>For example:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode css"><code class="sourceCode css"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#controls</span> {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding-top</span>: <span class="dv">1.5</span><span class="dt">em</span><span class="op">;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="window-dimensions-and-responsive">Window dimensions and
responsive</h3>
<p>This webview is responsive and supports live dimensions change of the
window. This webview remembers the window size you have before quitting
the app to use it when you open it again.</p>
<p>If you want to change the window dimensions at the first start,
change <code>width</code> and <code>height</code> in
<code>main.js</code> file in <code>mainWindow</code> variable when
creating the window.</p>
<h3 id="menu-and-keyboard-shortcuts">Menu and keyboard shortcuts</h3>
<p>This webview integrates an Electron menu. It will also make standard
keyboard shortcuts, like copy and paste, work on MacOS.</p>
<p>You can modify this menu in <code>src/menu.js</code> file.</p>
<h3 id="topbar-home-and-print-buttons">Topbar (home and print
buttons)</h3>
<p>A topbar to show buttons:</p>
<ul>
<li>“Home” button to come back to your app if your website has external
links.</li>
<li>“Print” button to print the current url displayed by the
webview.</li>
</ul>
<p>You can activate/deactivate this topbar (activate by default).</p>
<h4 id="deactivation">Deactivation</h4>
<h5 id="in-srcmain.js">In <code>src/main.js</code>:</h5>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Comment:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">// require(&quot;./src/print&quot;);</span></span></code></pre></div>
<h5 id="in-srcwindow.js">In <code>src/window.js</code>:</h5>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Comment:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">// preload: path.join(__dirname, &quot;../preload.js&quot;), // required for print function</span></span></code></pre></div>
<h5 id="in-index.html">In <code>index.html</code>:</h5>
<div class="sourceCode" id="cb6"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Comment --&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- &lt;link rel=&quot;stylesheet&quot; href=&quot;assets/css/topbar.css&quot; /&gt; --&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- &lt;div id=&quot;controls&quot;&gt;...&lt;/div&gt; --&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- &lt;script src=&quot;assets/js/renderer.js&quot;&gt;&lt;/script&gt; --&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Uncomment --&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;assets/css/no-topbar.css&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<h5 id="in-assetsjsrenderer.js">In
<code>assets/js/renderer.js</code>:</h5>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Comment:</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Home button exists</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">if (document.querySelector(&quot;#home&quot;)) {</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">  ...</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">}</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Print button exits</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">if (document.querySelector(&quot;#print_button&quot;)) {</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">  ...</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">}</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<h4 id="activation">Activation</h4>
<ul>
<li>Do the opposite of what you did in the activation chapter
above.</li>
<li>Don’t forget to set the homepage of your app in the
<code>data-home</code> attribute of <code>webview</code> in
<code>index.html</code> file to make the “Home” button works.</li>
</ul>
<div class="sourceCode" id="cb8"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">&lt;!-- Webview --&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;webview</span> <span class="er">autosize</span><span class="ot">=</span><span class="st">&quot;on&quot;</span> <span class="er">style</span><span class="ot">=</span><span class="st">&quot;height:100px&quot;</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;https://www.github.com&quot;</span> <span class="er">data-home</span><span class="ot">=</span><span class="st">&quot;https://github.com&quot;</span><span class="kw">&gt;&lt;/webview&gt;</span></span></code></pre></div>
<hr />
<!-- Webview -->
<p><webview autowidth="on" style="height:100px" src="http://0.0.0.0:1234" id="webview" data-home="http://0.0.0.0:1234"></webview></p>
<p>mainWindow.loadURL(<code>file://${__dirname}/index.html</code>);</p>
<h2 id="application">Application</h2>
<p>To create a MacOS, Windows and Linux executable with an app icon,
follow these instructions.</p>
<h3 id="electron-app-icon">Electron app icon</h3>
<p>For this we need a 1024x1024 png-icon, a .icns for macs and a .ico
for windows. For Linux we only need the pngs.</p>
<ul>
<li><p>Create your app icon</p></li>
<li><p>Go to <a href="https://iconverticons.com/online/">iConvert
Icons</a> and upload the PNG and the service will take care of creating
the other icon-formats.</p></li>
<li><p>Add your files in <code>assets/icons</code>: put the
<code>.icns</code> file into the <code>mac</code> folder, the pngs in
the png folder and the <code>.ico</code> file in the win
folder.<br>Rename the <code>.icns</code> and <code>.ico</code> files in
<code>icon</code>.</p></li>
</ul>
<h4 id="mac">Mac</h4>
<p>On Mac, the <code>.icns</code> icon converted with iConvert Icons
doesn’t work.</p>
<p>I recommend using <a
href="http://www.img2icnsapp.com">Image2icon</a>, an awesome free app to
create and personalize icons from your pictures, available on the Mac
Store.</p>
<p>The <code>.icns</code> icon converted with Image2icon perfectly works
on Mac.</p>
<h3 id="electron-packager">Electron packager</h3>
<p>“<a
href="https://github.com/electron-userland/electron-packager">Electron
Packager</a> is a command line tool and Node.js library that bundles
Electron-based application source code with a renamed Electron
executable and supporting files into folders ready for
distribution.”</p>
<h4 id="install-electron-packager">Install Electron packager</h4>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npm install electron-packager <span class="at">--save-dev</span></span></code></pre></div>
<h4 id="application-name">Application name</h4>
<p>Change the <code>productName</code> in <code>package.json</code></p>
<h4 id="build-macos-windows-and-linux-package-from-the-terminal">Build
MacOS, Windows and Linux package from the terminal</h4>
<p>MacOS</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npx electron-packager . <span class="at">--overwrite</span> <span class="at">--platform</span><span class="op">=</span>darwin <span class="at">--arch</span><span class="op">=</span>x64 <span class="at">--icon</span><span class="op">=</span>assets/icons/mac/icon.icns <span class="at">--prune</span><span class="op">=</span>true <span class="at">--out</span><span class="op">=</span>release-builds</span></code></pre></div>
<p>Windows</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npx electron-packager . <span class="at">--overwrite</span> <span class="at">--asar</span><span class="op">=</span>true <span class="at">--platform</span><span class="op">=</span>win32 <span class="at">--arch</span><span class="op">=</span>ia32 <span class="at">--icon</span><span class="op">=</span>assets/icons/win/icon.ico <span class="at">--prune</span><span class="op">=</span>true <span class="at">--out</span><span class="op">=</span>release-builds <span class="at">--version-string.CompanyName</span><span class="op">=</span>CE <span class="at">--version-string.FileDescription</span><span class="op">=</span>CE <span class="at">--version-string.ProductName</span><span class="op">=</span><span class="st">&quot;Electron Webview&quot;</span></span></code></pre></div>
<p>Linux (Ubuntu)</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npx electron-packager . <span class="at">--overwrite</span> <span class="at">--platform</span><span class="op">=</span>linux <span class="at">--arch</span><span class="op">=</span>x64 <span class="at">--icon</span><span class="op">=</span>assets/icons/png/1024x1024.png <span class="at">--prune</span><span class="op">=</span>true <span class="at">--out</span><span class="op">=</span>release-builds</span></code></pre></div>
<h4 id="shortcuts">Shortcuts</h4>
<p>To make it easier to create new builds, scripts are added in
<code>package.json</code>.</p>
<p>Now you can run:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npm run package-mac</span></code></pre></div>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npm run package-win</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npm run package-linux</span></code></pre></div>
<h2 id="mac-installer">Mac installer</h2>
<p>To create a DMG installer for our Electron app we can use the <a
href="https://github.com/mongodb-js/electron-installer-dmg">electron-installer-dmg</a>
package.</p>
<p>To create a DMG installer you first need to package the app as we saw
in the Application chapter above.</p>
<h3 id="install">Install</h3>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npm install electron-installer-dmg <span class="at">--save-dev</span></span></code></pre></div>
<h3 id="create-the-dmg">Create the DMG</h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npx electron-installer-dmg ./release-builds/Electron\ webview-darwin-x64/Electron\ webview.app electron-webview <span class="at">--out</span><span class="op">=</span>release-builds <span class="at">--overwrite</span> <span class="at">--icon</span><span class="op">=</span>assets/icons/mac/icon.icns</span></code></pre></div>
<p>An <code>electron-webview.dmg</code> file is now created in the
<code>release-builds</code> folder.</p>
<h3 id="shortcuts-1">Shortcuts</h3>
<p>To make it easier to create new DMG installer, a script is added in
<code>package.json</code>.</p>
<p>Now you can run:</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> npm run create-installer-mac</span></code></pre></div>
<h2 id="source">Source</h2>
<p>Based on:</p>
<ul>
<li><a
href="https://www.christianengvall.se/electron-packager-tutorial/">Electron
Packager tutorial</a></li>
<li><a
href="https://github.com/hokein/electron-sample-apps/tree/master/webview/browser">Browser</a></li>
<li><a
href="https://github.com/hokein/electron-sample-apps/tree/master/printing">Printing</a></li>
</ul>
<h2 id="references">References</h2>
<ul>
<li><a href="https://www.electronjs.org/docs/api/app">Electron -
app</a></li>
<li><a
href="https://www.electronjs.org/docs/api/browser-window#class-browserwindow">Electron
- BrowserWindow</a></li>
<li><a href="https://www.electronjs.org/docs/api/menu">Electron -
Menu</a></li>
<li><a href="https://www.electronjs.org/docs/api/webview-tag">Electron -
webview Tag</a></li>
<li><a
href="https://www.electronjs.org/docs/tutorial/quick-start">Electron
quick start</a></li>
</ul>
<h2 id="license">License</h2>
<p><a href="LICENSE.md">MIT</a></p>
<pre><code>&lt;!-- HTML --&gt;
&lt;!--
&lt;h1&gt;Hello world!&lt;/h1&gt;
&lt;p&gt;
  Lorem ipsum dolor sit amet consectetur adipisicing elit. Modi, voluptatum
  sint ullam minima molestias nam id autem perferendis! Cumque veritatis
  sunt dolor quidem cum? Natus dolore ipsum illum numquam molestiae?
&lt;/p&gt;
--&gt;</code></pre>
</body>
</html>
<h1 id="electron-bash-demo">electron + bash demo</h1>
<p>A slightly less simple electron app that execs a bash function when
you click a button</p>
<p>(not using angular just yet)</p>
<h3 id="reqs-setup">reqs &amp; setup</h3>
<pre><code>npm install electron-packager --save-dev
npm install electron-packager -g
npm install --save-dev bashit-electron
brew install imagemagick
npm install png2icns -g</code></pre>
<p>imagemagick and png2icns are not actually required. Both are used by
package.sh to generate icons for the app from this source image</p>
<pre><code>assets/icons/console_large.png</code></pre>
<h3 id="build">build</h3>
<pre><code>npm install</code></pre>
<h3 id="test-the-app-before-packaging">test the app before
packaging</h3>
<pre><code>npm start</code></pre>
<h3 id="package-the-app-for-distribution">package the app for
distribution</h3>
<h4 id="package.sh">package.sh</h4>
<p>package.sh can use imagemagic (convert) and png2icns to create the
icons from console_large.png. If neither app is installed script still
works but the app will have electrons default icon set.</p>
<p>If the icons exist, package.sh runs:</p>
<pre><code>electron-packager . --overwrite --platform=darwin --arch=x64 --icon=assets/icons/icon.icns --prune=true --out=release-builds &amp;&amp; \
electron-packager . electron-tutorial-app --overwrite --asar=true --platform=linux --arch=x64 --icon=assets/icons/png/icon_256.png --prune=true --out=release-builds</code></pre>
<h3 id="run-the-packaged-app-macos">run the packaged app (macos)</h3>
<pre><code>    open -a &quot;$(pwd)/release-builds/bashit-electron-darwin-x64/bashit-electron.app&quot;</code></pre>
<h3 id="extending-the-app-by-adding-more-bash-functions">extending the
app by adding more bash functions</h3>
<ol type="1">
<li>add your super new fn into bash_src/lib.sh like so</li>
</ol>
<pre><code>super-newfn() {
    echo &quot;this is my super new function&quot;
}</code></pre>
<ol start="2" type="1">
<li>using hello_fn as a template in main.js, add a js function to call
your bash function ala</li>
</ol>
<pre><code>function super-newfn(sender) {
    bashit_fn(sender, &#39;super-newfn&#39;);
}</code></pre>
<ol start="3" type="1">
<li>call you brand new function from index.html.</li>
</ol>
<p>add an ipc call in index.html that sends a message with the function
name as part of the event.</p>
<pre><code>ipcMain.on(&#39;bash-function-hello_fn&#39;, (event, arg) =&gt; {
    hello_fn(event.sender);
})</code></pre>
<ol start="4" type="1">
<li>Then, with the renderer emmiting a message, modify main.js to listen
for the event, and run the function. I recommend an event named
something like -</li>
</ol>
<pre><code>bash-function-super-newfn</code></pre>
<ol start="5" type="1">
<li><p>finally(!) emit a reponse ipc event from main.js with the string
returned by the bash subshell.</p></li>
<li><p>go back to index.html and listen for the new response event
and…</p></li>
</ol>
<p>BAM! stdout from your lovely bash fn is ready for the renderer</p>
